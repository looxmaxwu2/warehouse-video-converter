<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebM to MP4 Converter</title>
  <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.6/dist/ffmpeg.min.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; background: #111; color: #fff; padding: 30px; }
    input, button { margin: 10px; padding: 10px; font-size: 16px; }
    #downloadLink { display: none; font-size: 16px; margin-top: 20px; }
    #log { font-size: 14px; margin-top: 20px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>ğŸ WebM â†’ MP4 DÃ¶nÃ¼ÅŸtÃ¼rÃ¼cÃ¼</h2>
  <input type="file" id="uploader" accept=".webm" />
  <br />
  <button id="convertBtn">DÃ¶nÃ¼ÅŸtÃ¼r</button>
  <br />
  <a id="downloadLink" download="output.mp4">ğŸ“¥ MP4 Ä°ndir</a>
  <div id="log"></div>

  <script>
    const { createFFmpeg, fetchFile } = FFmpeg;
    const ffmpeg = createFFmpeg({ log: true });
    const uploader = document.getElementById('uploader');
    const convertBtn = document.getElementById('convertBtn');
    const downloadLink = document.getElementById('downloadLink');
    const log = document.getElementById('log');

    convertBtn.onclick = async () => {
      if (!uploader.files.length) {
        alert("LÃ¼tfen bir .webm dosyasÄ± seÃ§in!");
        return;
      }

      const file = uploader.files[0];
      log.innerText = "ğŸ”„ FFmpeg yÃ¼kleniyor...";
      if (!ffmpeg.isLoaded()) await ffmpeg.load();

      const inputName = 'input.webm';
      const outputName = 'output.mp4';

      log.innerText += "\nğŸ“¥ Dosya belleÄŸe yazÄ±lÄ±yor...";
      ffmpeg.FS('writeFile', inputName, await fetchFile(file));

      log.innerText += "\nğŸ¬ DÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼yor...";
      await ffmpeg.run('-i', inputName, '-c:v', 'libx264', '-c:a', 'aac', outputName);

      log.innerText += "\nğŸ“¤ MP4 dosyasÄ± hazÄ±rlanÄ±yor...";
      const data = ffmpeg.FS('readFile', outputName);
      const mp4Blob = new Blob([data.buffer], { type: 'video/mp4' });
      const url = URL.createObjectURL(mp4Blob);
      downloadLink.href = url;
      downloadLink.style.display = 'inline-block';
      log.innerText += "\nâœ… Bitti! MP4'Ã¼ indir.";
    };
  </script>
</body>
</html>
